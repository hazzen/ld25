<html>
  <head>
    <title>ld25 - you are the villain</title>
    <link rel='stylesheet' type='text/css' href='ld25.css'>
    <script type='text/javascript' src='d3.v2.min.js'></script>
    <script type='text/javascript' src='base.js'></script>
    <script type='text/javascript' src='pidgine.js'></script>
    <script type='text/javascript' src='renderer.js'></script>
    <script type='text/javascript' src='entities.js'></script>
    <script type='text/javascript' src='ld25.js'></script>
  </head>
  <body>
    <div>
    <div id="game">
      <div id="shoot" tabindex="0">
      </div>
      <div id="build">
        <div class='left'>
        </div>
        <div class='right'>
        </div>
      </div>
    </div>

    <script type="text/javascript">
      DEBUG = false;
      FRAME_RATE = 60;

      var gameElem = document.getElementById('game');

      var shootElem = document.getElementById('shoot');
      var daRenderer = new Renderer(shootElem, 640, 480);
      RENDERER = daRenderer;

      var stepping = true;

      var shootGame = new ShootGame();
      var level = Level.loadFromString(Level.randomOfHeight(1), DEFAULT_BLOCKS);
      shootGame.setLevel(level);

      var buildGame = new BuildGame(document.getElementById('build'));
      buildGame.makeHtml();

      var gameStruct = {
        elem: gameElem,
        tick: function(t) {
          if (KB.keyPressed('h')) {
            stepping = !stepping;
          }
          if (stepping || KB.keyPressed('n')) {
            shootGame.tick(t);
          }
        },
        render: function() {
          daRenderer.render(function() {
            shootGame.render(daRenderer);
          });
        }
      };

      Pidgine.run(gameStruct);
    </script>
  </body>
</html>
